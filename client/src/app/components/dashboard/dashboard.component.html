<app-actions-list></app-actions-list>

<section *ngIf="tests" id="dashboard-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-9">
        <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
          <li [ngbNavItem]="1">
            <a ngbNavLink (click)="nameLengthChanger()">Broken Tests</a>
            <ng-template ngbNavContent>
              <table class="table table-striped border">
                <thead class="thead">
                  <tr>
                    <th>Name</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let test of broken$ | async">
                    <td>{{ test.name | nameShorten: nameLength }}</td>
                    <td>
                      <a href="/" class="btn btn-secondary">
                        <i class="fa fa-angle-double-right"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-template>
          </li>
          <li [ngbNavItem]="2">
            <a ngbNavLink (click)="nameLengthChanger()">No TestLink Tag</a>
            <ng-template ngbNavContent>
              <table class="table table-striped border">
                <thead class="thead">
                  <tr>
                    <th>Name</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let test of noTestLink$ | async">
                    <td>{{ test.name | nameShorten: nameLength }}</td>
                    <td>
                      <a href="/" class="btn btn-secondary">
                        <i class="fa fa-angle-double-right"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-template>
          </li>
          <form class="form-inline ml-auto">
            <div class="form-group-row form-inline ml-auto">
              <input
                placeholder="Search"
                class="form-control ml-2"
                type="text"
                [formControl]="filter"
              />
            </div>
          </form>
          <!-- <form *ngIf="active === 2" class="form-inline ml-auto">
            <div class="form-group-row form-inline ml-auto">
              <input placeholder="Search" class="form-control ml-2" type="text" [formControl]="filter" />
            </div>
          </form> -->
        </ul>
        <div [ngbNavOutlet]="nav" class="mt-2"></div>
      </div>

      <div class="col-lg-3">
        <div class="card text-center bg-primary text-white mb-3">
          <div class="card-body">
            <h4>Tests</h4>
            <h5 class="display-5">
              <i class="fa fa-cog"></i> {{ tests.length || 0 }}
            </h5>
            <a routerLink="/tests" class="btn btn-outline-light btn-sm">View</a>
          </div>
        </div>

        <div class="card text-center bg-success text-white mb-3">
          <div class="card-body">
            <h4>Tagged</h4>
            <h5 class="display-5">
              <i class="fa fa-tags"></i>
              <span *ngIf="tests && noTestLinkTests">
                {{ tests.length - noTestLinkTests.length }}</span
              >
            </h5>
            <a routerLink="/tags" class="btn btn-outline-light btn-sm">View</a>
          </div>
        </div>

        <div class="card text-center bg-danger text-white mb-3">
          <div class="card-body">
            <h4>Broken</h4>
            <h5 class="display-5">
              <i class="fa fa-chain-broken"></i>
              <span *ngIf="brokenTests"> {{ brokenTests.length }}</span>
            </h5>
            <a routerLink="/tags" class="btn btn-outline-light btn-sm">View</a>
          </div>
        </div>

        <div class="card text-center bg-warning text-white mb-3">
          <div class="card-body">
            <h4>Users</h4>
            <h5 class="display-5"><i class="fa fa-users"></i> 4</h5>
            <a routerLink="/users" class="btn btn-outline-light btn-sm">View</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
